"use strict";(self.webpackChunkform_editor_vscode_doc=self.webpackChunkform_editor_vscode_doc||[]).push([[695],{8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var i=t(6540);const o={},s=i.createContext(o);function r(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(s.Provider,{value:n},e.children)}},9425:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>l,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"how-does-it-work","title":"How Does It Work?","description":"This document explains what happens under the hood when you open a file in VSCode with the Yard58 Form Editor extension installed.","source":"@site/doc/01-how-does-it-work.md","sourceDirName":".","slug":"/how-does-it-work","permalink":"/form-editor-vscode-doc/how-does-it-work","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Introduction","permalink":"/form-editor-vscode-doc/"}}');var o=t(4848),s=t(8453);const r={},a="How Does It Work?",d={},c=[{value:"Assumptions",id:"assumptions",level:3},{value:"Activation &amp; File Matching",id:"activation--file-matching",level:3},{value:"Schema Fetch &amp; Caching",id:"schema-fetch--caching",level:3},{value:"Building &amp; Rendering the Form",id:"building--rendering-the-form",level:3},{value:"Putting It All Together",id:"putting-it-all-together",level:3},{value:"Next Steps",id:"next-steps",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"how-does-it-work",children:"How Does It Work?"})}),"\n",(0,o.jsxs)(n.p,{children:["This document explains what happens under the hood when you open a file in VSCode with the ",(0,o.jsx)(n.strong,{children:"Yard58 Form Editor"})," extension installed."]}),"\n",(0,o.jsx)(n.h3,{id:"assumptions",children:"Assumptions"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["A configuration file named ",(0,o.jsx)(n.code,{children:"yard58-form-editor.config.json"})," is present at the root of the current VSCode workspace. This configuration file associates file patterns with form schemas."]}),"\n",(0,o.jsx)(n.li,{children:"The corresponding form schemas are available in GitHub."}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"More will be explained about how to create these files in the following sections, but for now, just assume they exist."}),"\n",(0,o.jsx)(n.h3,{id:"activation--file-matching",children:"Activation & File Matching"}),"\n",(0,o.jsxs)(n.p,{children:["Every time a file is opened in VSCode, the extension reads the ",(0,o.jsx)(n.code,{children:"yard58-form-editor.config.json"})," configuration file in the current VSCode workspace root."]}),"\n",(0,o.jsx)(n.p,{children:"That configuration file contains a map of patterns and schema URLs. Example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n    "associations": {\n        "server.config.json": "https://github.com/yard58/form-schema-examples/blob/main/server-config.schema.json"\n    }\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:['This example configuration says: "Every time a file named ',(0,o.jsx)(n.code,{children:"server.config.json"})," is opened, use the form defined at ",(0,o.jsx)(n.code,{children:"https://github.com/yard58/form-schema-examples/blob/main/server-config.schema.json"}),' to edit it. For any other file, just edit it with the default VSCode editor, i.e. as text."']}),"\n",(0,o.jsxs)(n.p,{children:["This example is voluntarily simple, but you can add as many associations as you want and the patterns can be any ",(0,o.jsx)(n.a,{href:"https://code.visualstudio.com/docs/editor/glob-patterns",children:"VSCode glob pattern"}),"."]}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["If no ",(0,o.jsx)(n.code,{children:"yard58-form-editor.config.json"})," file exists in the root of the current VSCode workspace, the extension issues a warning and all files are opened in a regular VSCode text editor."]})}),"\n",(0,o.jsx)(n.p,{children:"The extension looks up this map to determine if the opened file matches a configured pattern."}),"\n",(0,o.jsx)(n.p,{children:"If the file\u2019s path matches no configured pattern, VSCode opens it with the regular JSON/text editor."}),"\n",(0,o.jsx)(n.p,{children:"If a matching pattern is found, the extension proceeds to the form workflow. Note that if the opened file matches several patterns, the first one will have precendence."}),"\n",(0,o.jsx)(n.h3,{id:"schema-fetch--caching",children:"Schema Fetch & Caching"}),"\n",(0,o.jsx)(n.p,{children:"Cache lookup:"}),"\n",(0,o.jsxs)(n.p,{children:["The first time a given schema URL is used, the extension downloads the schema JSON from that URL and stores it under the ",(0,o.jsx)(n.code,{children:".yard58-form-editor-schemas"})," folder at the root of the current VSCode workspace (the extension automatically creates it if it doesn't already exist)."]}),"\n",(0,o.jsxs)(n.p,{children:["Tip: Consider adding ",(0,o.jsx)(n.code,{children:".yard58-form-editor-schemas/"})," to your ",(0,o.jsx)(n.code,{children:".gitignore"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"Staleness check:"}),"\n",(0,o.jsx)(n.p,{children:"On subsequent file opens, the extension checks if there is a newer version of the schema file in GitHub."}),"\n",(0,o.jsx)(n.p,{children:"If a newer version exists online, it re-downloads; otherwise it keeps the local copy."}),"\n",(0,o.jsx)(n.p,{children:"Local schema available:"}),"\n",(0,o.jsx)(n.p,{children:"The schema JSON is now available instantly from the cache for parsing."}),"\n",(0,o.jsx)(n.h3,{id:"building--rendering-the-form",children:"Building & Rendering the Form"}),"\n",(0,o.jsx)(n.p,{children:"The extension then reads the cached schema, which describes:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Fields (types: string, number, boolean, array, object...)"}),"\n",(0,o.jsx)(n.li,{children:"Layout directives (groups, tabs, order...)"}),"\n",(0,o.jsx)(n.li,{children:"Validation constraints (min/max, regex, required...)"}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"From this description, the extension instantiates a form inside a custom VSCode editor tab, that allows to edit and save the opened file."}),"\n",(0,o.jsx)(n.h3,{id:"putting-it-all-together",children:"Putting It All Together"}),"\n",(0,o.jsx)(n.p,{children:"Layout"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"flowchart TD\n  A[Open File in VSCode] --\x3e B{Matches Pattern?}\n  B -- No --\x3e C[Regular Editor]\n  B -- Yes --\x3e D[Fetch/Check Schema]\n  D --\x3e E{Schema Cached?}\n  E -- No --\x3e F[Download & Cache]\n  E -- Yes --\x3e G[Use Cached Schema]\n  G --\x3e H[Parse & Render Form]\n  H --\x3e I[User Edits]\n  I --\x3e J[On Save: Serialize JSON]\n"})}),"\n",(0,o.jsx)(n.h3,{id:"next-steps",children:"Next Steps"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Config file syntax"}),": How to define patterns and associated schemas in the ",(0,o.jsx)(n.code,{children:"yard58-form-editor.config.json"})," configuration file?"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Schema development"}),": How to define a schema that describes a form to edit a JSON file?"]}),"\n"]}),"\n"]})]})}function l(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}}}]);